@*
 * This template is called from the `index` template. This template
 * handles the rendering of the page header and body tags. It takes
 * two arguments, a `String` for the title of the page and an `Html`
 * object to insert into the body of the page.
 *@
@(title: String)(content: Html)

<!DOCTYPE html>
<html lang="en">
    <head>
        @* Here's where we render the page title `String`. *@
        <title>@title</title>
        <link rel="preconnect" href="https://fonts.gstatic.com">
        <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
        <link rel="stylesheet" media="screen" href="@routes.Assets.versioned("stylesheets/main.css")">
        <link rel="shortcut icon" type="image/png" href="@routes.Assets.versioned("images/favicon.png")">
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <meta name="color-scheme" content="dark light">
    </head>
    <body>

        <header class="nav">
            <h1><a href="/">SP Project</a></h1>
            <ul class="nav__links">
                <li><a href="/hello?name=Moritz">Hello</a></li>
                <li><a href="/topics">Topics</a></li>
                <li><a href="/about">About</a></li>
            </ul>
            <ul class="nav__links">
                <li id="drop"><a href="#"><span class="material-icons" id="menu">menu</span></a>
                    <ul class="nav__menu__drop">
                        <li>Test</li>
                        <li>Contact</li>
                        <li>Github</li>
                    </ul>
                </li>
                <li>
                    <button class="btn-toggle" >
                        <span class="material-icons" id="dark">
                            dark_mode
                        </span>
                    </button>
                </li>
            </ul>

        </header>

        <div class="content">
        @content
        </div>

        <div class="footer">
            <h1>Footer</h1>
        </div>

      <script src="@routes.Assets.versioned("javascripts/main.js")" type="text/javascript"></script>
        <script>
                const btn = document.querySelector(".btn-toggle");
                const prefersDarkScheme = window.matchMedia("(prefers-color-scheme: dark)");
                const currentTheme = localStorage.getItem("theme");
                btn.addEventListener("click", function() {
                    if (prefersDarkScheme.matches) {
                        document.body.classList.toggle("light-theme");
                        document.getElementById("menu").classList.toggle("md-dark");
                        document.getElementById("dark").classList.toggle("md-dark");

                    } else {
                        document.getElementById("menu").classList.toggle("md-light");
                        document.getElementById("dark").classList.toggle("md-light");
                        document.body.classList.toggle("dark-theme");
                    }
                    //TODO: Fix icon change with theme change
                    const currentTheme = document.body.classList.item(0)
                    if (currentTheme == "dark-theme") {
                        document.getElementById("dark").innerHTML = "light_mode";
                    } else if (currentTheme == "light-theme") {
                        document.getElementById("dark").innerHTML = "dark_mode";
                    }
                });
        </script>
    </body>
</html>
